<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    PARM{include:/head.html}
</head>
<body>
PARM{include:/header.html}

<div id="containerbody">
    <div id="backlink">
        <i class="material-icons">keyboard_arrow_left</i><a href="/">Tillbaka till inloggningssidan</a>
    </div>

    PARM{include:/content.html}

    <h2>Inloggning med Mobilt BankID</h2>
    <form method="post" action="/mg-localPARM{form-url}" name="form" accept-charset="UTF-8">
        <span><p>Ange ditt personnummer<!--PARM{text-mbi-ssn}--></p></span>
        <div class="pnrinput">
            <input autocomplete="off" class="form-control inputfield" type="text" name="ssn" placeholder="ååååmmdd-nnnn"
                   maxlength="13" pattern="[0-9]{8}[-]{1}[0-9]{4}" id="numberInput" onkeyup="inputCheck(event)"
                   oninput="valueCheck()">
            <button class="button btn btn-success" id="submitButton" type="submit" disabled>
                <span>Fortsätt</span>
            </button>
        </div>
        <p class="errortxt">PARM{error-message}</p>
    </form>
</div>

<script>
    var oldValue = document.getElementById("numberInput").value;

    function valueCheck() {
        var newValue = document.getElementById("numberInput").value;

        if (newValue.match(/(^\d{1,8}$|^[0-9]{8}[-]{1}[0-9]{0,4}$)/)) {
            oldValue = newValue;
        } else if (newValue.length > 1) {
            document.getElementById("numberInput").value = oldValue;
        } else {
            document.getElementById("numberInput").value = '';
        }

    }

    function inputCheck(event) {

        var inputValue = document.getElementById("numberInput").value;

        if (inputValue.match(/(^\d{1,8}$|^[0-9]{8}[-]{1}[0-9]{0,4}$)/)) {
            var key = event.keyCode || event.charCode;

            if (inputValue.length === 8 && key !== 8) {
                document.getElementById("numberInput").value = inputValue + '-';
            }
        }

        if (inputValue.match(/[0-9]{8}[-]{1}[0-9]{4}/)) {
            document.getElementById("submitButton").disabled = false;
        } else {
            document.getElementById("submitButton").disabled = true;
        }
    }
</script>

PARM{include:/footer.html}
</body>
</html>