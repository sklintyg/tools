# Kontrollera så urvalet blir det förväntade
SELECT * FROM ARENDE a WHERE a.PATIENT_PERSON_ID = '19121212-1212';
SELECT * FROM FRAGASVAR fs WHERE fs.PATIENT_ID = '19121212-1212';
SELECT * FROM HANDELSE h WHERE h.PATIENT_PERSON_ID = '19121212-1212';
SELECT * FROM SIGNATUR s WHERE s.INTYG_ID IN (SELECT INTYGS_ID FROM INTYG i WHERE i.PATIENT_PERSONNUMMER = '19121212-1212');
SELECT * FROM INTYG i WHERE i.PATIENT_PERSONNUMMER = '19121212-1212';

# Radera
DELETE FROM ARENDE WHERE PATIENT_PERSON_ID = '19121212-1212';
DELETE FROM FRAGASVAR WHERE PATIENT_ID = '19121212-1212';
DELETE FROM HANDELSE WHERE PATIENT_PERSON_ID = '19121212-1212';
DELETE FROM SIGNATUR WHERE INTYG_ID IN (SELECT INTYGS_ID FROM INTYG i WHERE i.PATIENT_PERSONNUMMER = '19121212-1212');
DELETE FROM INTYG WHERE PATIENT_PERSONNUMMER = '19121212-1212';



### INTYGSTJÄNST, kör SELECTs för att verifiera urval.
SELECT * FROM ORIGINAL_CERTIFICATE oc WHERE oc.CERTIFICATE_ID IN (SELECT c.ID FROM CERTIFICATE c WHERE c.CIVIC_REGISTRATION_NUMBER = '19121212-1212');
SELECT * FROM RELATION r WHERE r.FROM_INTYG_ID IN (SELECT c.ID FROM CERTIFICATE c WHERE c.CIVIC_REGISTRATION_NUMBER = '19121212-1212') OR r.TO_INTYG_ID IN (SELECT c.ID FROM CERTIFICATE c WHERE c.CIVIC_REGISTRATION_NUMBER = '19121212-1212');
SELECT * FROM CERTIFICATE_STATE cs WHERE cs.CERTIFICATE_ID IN (SELECT c.ID FROM CERTIFICATE c WHERE c.CIVIC_REGISTRATION_NUMBER = '19121212-1212');

SELECT * FROM SJUKFALL_CERT_WORK_CAPACITY scwc WHERE scwc.CERTIFICATE_ID IN (SELECT sc.ID FROM SJUKFALL_CERT sc WHERE sc.ID IN (SELECT c.ID FROM CERTIFICATE c WHERE c.CIVIC_REGISTRATION_NUMBER = '19121212-1212'));

SELECT * FROM SJUKFALL_CERT sc WHERE sc.ID IN (SELECT c.ID FROM CERTIFICATE c WHERE c.CIVIC_REGISTRATION_NUMBER = '19121212-1212');

SELECT * FROM CERTIFICATE c WHERE c.CIVIC_REGISTRATION_NUMBER = '19121212-1212';
SELECT * FROM CONSENT co WHERE co.CIVIC_REGISTRATION_NUMBER = '19121212-1212';

### Delete. Körs i denna ordning för att undvika problem med referentiell integritet.
DELETE FROM SJUKFALL_CERT_WORK_CAPACITY WHERE CERTIFICATE_ID IN (SELECT sc.ID FROM SJUKFALL_CERT sc WHERE sc.ID IN (SELECT c.ID FROM CERTIFICATE c WHERE c.CIVIC_REGISTRATION_NUMBER = '19121212-1212'));
DELETE FROM SJUKFALL_CERT WHERE ID IN (SELECT c.ID FROM CERTIFICATE c WHERE c.CIVIC_REGISTRATION_NUMBER = '19121212-1212');
DELETE FROM CERTIFICATE_STATE WHERE CERTIFICATE_ID IN (SELECT c.ID FROM CERTIFICATE c WHERE c.CIVIC_REGISTRATION_NUMBER = '19121212-1212');
DELETE FROM RELATION WHERE FROM_INTYG_ID IN (SELECT c.ID FROM CERTIFICATE c WHERE c.CIVIC_REGISTRATION_NUMBER = '19121212-1212') OR TO_INTYG_ID IN (SELECT c.ID FROM CERTIFICATE c WHERE c.CIVIC_REGISTRATION_NUMBER = '19121212-1212');
DELETE FROM ORIGINAL_CERTIFICATE WHERE CERTIFICATE_ID IN (SELECT c.ID FROM CERTIFICATE c WHERE c.CIVIC_REGISTRATION_NUMBER = '19121212-1212');
DELETE FROM CONSENT WHERE CIVIC_REGISTRATION_NUMBER = '19121212-1212';
DELETE FROM CERTIFICATE WHERE CIVIC_REGISTRATION_NUMBER = '19121212-1212';



-- DELETES FÖR SPECIFIKA PATIENTER --
-- WEBCERT
DELETE FROM ARENDE WHERE PATIENT_PERSON_ID = '19121212-1212';
DELETE FROM FRAGASVAR WHERE PATIENT_ID = '19121212-1212';
DELETE FROM HANDELSE WHERE PATIENT_PERSON_ID = '19121212-1212';
DELETE FROM SIGNATUR WHERE SIGNATUR.INTYG_ID IN (SELECT INTYGS_ID FROM INTYG WHERE PATIENT_PERSONNUMMER = '19121212-1212');
DELETE FROM INTYG WHERE PATIENT_PERSONNUMMER = '19121212-1212';


-- IT
DELETE FROM SJUKFALL_CERT_WORK_CAPACITY WHERE CERTIFICATE_ID IN (SELECT sc.ID FROM SJUKFALL_CERT sc WHERE sc.ID IN (SELECT c.ID FROM CERTIFICATE c WHERE c.CIVIC_REGISTRATION_NUMBER = '19121212-1212'));

DELETE FROM SJUKFALL_CERT WHERE ID IN (SELECT c.ID FROM CERTIFICATE c WHERE c.CIVIC_REGISTRATION_NUMBER = '19121212-1212');

DELETE FROM CERTIFICATE_STATE WHERE CERTIFICATE_ID IN (SELECT c.ID FROM CERTIFICATE c WHERE c.CIVIC_REGISTRATION_NUMBER = '19121212-1212');

DELETE FROM RELATION WHERE FROM_INTYG_ID IN (SELECT c.ID FROM CERTIFICATE c WHERE c.CIVIC_REGISTRATION_NUMBER = '19121212-1212') OR TO_INTYG_ID IN (SELECT c.ID FROM CERTIFICATE c WHERE c.CIVIC_REGISTRATION_NUMBER = '19121212-1212');

DELETE FROM CONSENT WHERE CIVIC_REGISTRATION_NUMBER = '19121212-1212';

-- OBS!!! Ger lokalt: ERROR 1206 (HY000): The total number of locks exceeds the lock table size. Åtgärdades
-- genom att höja innodb_buffer_pool_size

DELETE FROM ORIGINAL_CERTIFICATE WHERE CERTIFICATE_ID IN (SELECT c.ID FROM CERTIFICATE c WHERE c.CIVIC_REGISTRATION_NUMBER = '19121212-1212');

-- OBS! Går inte att köra innan ORIGINAL_CERTIFICATE ovan körts pga foreign key constraints

DELETE FROM CERTIFICATE WHERE CIVIC_REGISTRATION_NUMBER = '19121212-1212';


-- 19121212-1212  och 1990082-5298
